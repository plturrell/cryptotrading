<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.f">

    <!-- Market Overview Tile - Official SAP Standard 12x14 rem -->
    <GenericTile 
        header="Market Overview"
        subheader="Real-time cryptocurrency prices"
        press="onMarketOverviewPress"
        state="Loaded"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NumericContent
                        value="{app>/marketData/btcPrice}"
                        scale="USD"
                        indicator="{app>/marketData/btcIndicator}"
                        valueColor="{= ${app>/marketData/btcChange} > 0 ? 'Good' : 'Error' }"
                        withMargin="false"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- ML Predictions Tile -->
    <GenericTile 
        header="ML Predictions" 
        subheader="Real-time price forecasting"
        press="onMLPredictionsPress"
        state="{= ${app>/mlPredictions/loading} ? 'Loading' : 'Loaded' }"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NumericContent
                        value="{app>/mlPredictions/btc/confidence}"
                        scale="% Confidence"
                        indicator="{= ${app>/mlPredictions/btc/price_change_percent} > 0 ? 'Up' : 'Down' }"
                        valueColor="{= ${app>/mlPredictions/btc/confidence} > 80 ? 'Good' : 'Neutral' }"
                        withMargin="false"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- Model Training Tile -->
    <GenericTile 
        header="Model Training"
        subheader="Train and deploy ML models"
        press="onModelTrainingPress"
        state="{= ${app>/mlPredictions/loading} ? 'Loading' : 'Loaded' }"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NumericContent
                        value="{app>/mlPredictions/models_trained}"
                        scale="Models"
                        valueColor="Neutral"
                        withMargin="false"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- AI Market Intelligence Tile - Large 2x1 format -->
    <GenericTile 
        header="AI Market Intelligence"
        subheader="ML-powered price predictions"
        press="onAIMarketIntelligencePress"
        state="{= ${app>/mlPredictions/loading} ? 'Loading' : 'Loaded' }"
        frameType="TwoByOne">
        <layoutData>
            <f:GridContainerItemLayoutData columns="25" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NewsContent
                        contentText="{= 'BTC: $' + ${app>/mlPredictions/btc/current_price} + ' → $' + ${app>/mlPredictions/btc/predicted_price} + ' (' + (${app>/mlPredictions/btc/price_change_percent} > 0 ? '+' : '') + ${app>/mlPredictions/btc/price_change_percent} + '%). ETH: $' + ${app>/mlPredictions/eth/current_price} + ' → $' + ${app>/mlPredictions/eth/predicted_price} + '. Model accuracy: ' + ${app>/mlPredictions/btc/model_accuracy} + '%' }"
                        subheader="{= 'ML Prediction: ' + (${app>/mlPredictions/btc/price_change_percent} > 0 ? 'BULLISH' : 'BEARISH') + ' (' + ${app>/mlPredictions/btc/confidence} + '% confidence)' }"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- ML Feature Store Tile -->
    <GenericTile 
        header="Feature Store"
        subheader="ML feature engineering"
        press="onFeatureStorePress"
        state="{= ${app>/featureStore/loading} ? 'Loading' : 'Loaded' }"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NumericContent
                        value="{app>/featureStore/total_features}"
                        scale="Features"
                        valueColor="Neutral"
                        withMargin="false"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- Risk Management Tile -->
    <GenericTile 
        header="Risk Management"
        subheader="Portfolio risk metrics"
        press="onRiskManagementPress"
        state="Loaded"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NumericContent
                        value="12.3"
                        scale="% VaR"
                        indicator="Up"
                        valueColor="Critical"
                        withMargin="false"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- Historical Data Tile -->
    <GenericTile 
        header="Historical Data"
        subheader="Download market datasets"
        press="onHistoricalDataPress"
        state="Loaded"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NumericContent
                        value="2.3"
                        scale="TB"
                        valueColor="Neutral"
                        withMargin="false"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- Technical Analysis Tile -->
    <GenericTile 
        header="Technical Analysis"
        subheader="Advanced crypto TA dashboard"
        press="onTechnicalAnalysisPress"
        state="Loaded"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NumericContent
                        value="{app>/technicalAnalysis/rsi}"
                        scale="RSI"
                        indicator="{app>/technicalAnalysis/rsiIndicator}"
                        valueColor="{app>/technicalAnalysis/rsiColor}"
                        withMargin="false"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- Code Analysis Tile -->
    <GenericTile 
        header="Code Analysis"
        subheader="Multi-language indexer dashboard"
        press="onCodeAnalysisPress"
        state="Loaded"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NumericContent
                        value="106.5"
                        scale="K Facts"
                        indicator="Up"
                        valueColor="Good"
                        withMargin="false"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- MCP Tools Monitoring Tile -->
    <GenericTile 
        header="MCP Monitoring"
        subheader="Tool performance & tracing"
        press="onMCPMonitoringPress"
        state="{= ${app>/mcpStatus/state} === 'healthy' ? 'Loaded' : 'Failed' }"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NumericContent
                        value="{app>/mcpStatus/activeTools}"
                        scale="Tools Active"
                        indicator="{= ${app>/mcpStatus/successRate} > 95 ? 'Up' : 'Down' }"
                        valueColor="{= ${app>/mcpStatus/successRate} > 95 ? 'Good' : 'Critical' }"
                        withMargin="false"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- AWS Data Exchange Tile -->
    <GenericTile 
        header="AWS Data Exchange"
        subheader="Financial datasets & feeds"
        press="onAWSDataExchangePress"
        state="Loaded"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NumericContent
                        value="{app>/awsDataExchange/datasets}"
                        scale="Datasets"
                        valueColor="Neutral"
                        withMargin="false"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- Data Loading Service Tile -->
    <GenericTile 
        header="Data Loading"
        subheader="Real-time data ingestion"
        press="onDataLoadingPress"
        state="{= ${app>/dataLoading/status} === 'running' ? 'Loading' : 'Loaded' }"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NumericContent
                        value="{app>/dataLoading/recordsPerSec}"
                        scale="rec/s"
                        indicator="Up"
                        valueColor="Good"
                        withMargin="false"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- News Panel Tile -->
    <GenericTile 
        header="News & Sentiment"
        subheader="Market news analysis"
        press="onNewsPanelPress"
        state="Loaded"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <NewsContent
                        contentText="{app>/news/latest/title}"
                        subheader="{app>/news/sentiment}"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>
    
    <!-- System Settings Tile -->
    <GenericTile 
        header="System Settings"
        subheader="Configure platform parameters"
        press="onSystemSettingsPress"
        state="Loaded"
        size="M">
        <layoutData>
            <f:GridContainerItemLayoutData columns="12" rows="14"/>
        </layoutData>
        <tileContent>
            <TileContent>
                <content>
                    <ImageContent 
                        src="sap-icon://action-settings"/>
                </content>
            </TileContent>
        </tileContent>
    </GenericTile>

</core:FragmentDefinition>